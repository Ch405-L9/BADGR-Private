#!/usr/bin/env bash
# Agentik Project - Standard Path Configuration
# Source this in all scripts: source "$(dirname "$0")/../configs/paths.env"

# Auto-detect base if not set
export BADGR_BASE="${BADGR_BASE:-$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)}"

# Input configs
export MANIFEST_YAML="${BADGR_BASE}/configs/manifest.yaml"
export DOMAINS_FILE="${BADGR_BASE}/configs/domains.txt"
export BOT_CONFIG="${BADGR_BASE}/configs/bot.config.yaml"

# Output directories
export OUT_BASE="${BADGR_BASE}/outputs"
export CONTACTS_DIR="${OUT_BASE}/contacts"
export ENRICHED_DIR="${OUT_BASE}/enriched"
export LIGHTHOUSE_DIR="${OUT_BASE}/lighthouse"
export CSV_DIR="${OUT_BASE}/csv"
export LOGS_DIR="${OUT_BASE}/logs"

# Output files
export CONTACTS_CSV="${CONTACTS_DIR}/contacts.csv"
export ENRICHED_CSV="${ENRICHED_DIR}/enriched.csv"
export RESULTS_CSV="${CSV_DIR}/results.csv"
export URLS_TXT="${OUT_BASE}/urls.txt"

# Scripts
export SCRIPTS_DIR="${BADGR_BASE}/scripts"
export DISCOVER_SCRIPT="${SCRIPTS_DIR}/discover.py"
export ENRICH_SCRIPT="${SCRIPTS_DIR}/enrich_contacts.py"

# Validate critical paths exist
_validate_paths() {
    [[ -d "$BADGR_BASE" ]] || { echo "ERROR: BADGR_BASE not found: $BADGR_BASE" >&2; return 1; }
    [[ -f "$MANIFEST_YAML" ]] || echo "WARN: manifest.yaml not found" >&2
    return 0
}

_validate_paths

